{% extends "base.html" %}

{% block title %}Export - ScreenCast Studio{% endblock %}

{% block content %}
<div class="export-page">
    <!-- Header -->
    <header class="workspace-header">
        <div class="header-left">
            <a href="/recording" class="back-btn">â† Back to Recording</a>
        </div>
    </header>

    <!-- Main Content -->
    <div class="export-main">
        <h1>ğŸ“¦ Export Package</h1>

        <div class="export-card">
            <h2>Generated Files</h2>
            <div class="files-list">
                <div class="file-item">
                    <span class="file-icon">ğŸ“</span>
                    <div class="file-info">
                        <span class="file-name">narration_script.md</span>
                        <span class="file-desc">Full narration with visual cues</span>
                    </div>
                    <span class="file-size">4.2 KB</span>
                </div>
                <div class="file-item">
                    <span class="file-icon">ğŸ™ï¸</span>
                    <div class="file-info">
                        <span class="file-name">narration_tts.txt</span>
                        <span class="file-desc">TTS-optimized (no cues)</span>
                    </div>
                    <span class="file-size">3.8 KB</span>
                </div>
                <div class="file-item">
                    <span class="file-icon">ğŸ““</span>
                    <div class="file-info">
                        <span class="file-name">demo.ipynb</span>
                        <span class="file-desc">Jupyter notebook demo</span>
                    </div>
                    <span class="file-size">12.4 KB</span>
                </div>
                <div class="file-item">
                    <span class="file-icon">ğŸ</span>
                    <div class="file-info">
                        <span class="file-name">generate_data.py</span>
                        <span class="file-desc">Data generation script</span>
                    </div>
                    <span class="file-size">2.1 KB</span>
                </div>
                <div class="file-item">
                    <span class="file-icon">ğŸ“Š</span>
                    <div class="file-info">
                        <span class="file-name">data/users.csv</span>
                        <span class="file-desc">1,000 sample users</span>
                    </div>
                    <span class="file-size">48 KB</span>
                </div>
                <div class="file-item">
                    <span class="file-icon">ğŸ“Š</span>
                    <div class="file-info">
                        <span class="file-name">data/transactions.csv</span>
                        <span class="file-desc">10,000 transactions</span>
                    </div>
                    <span class="file-size">512 KB</span>
                </div>
                <div class="file-item">
                    <span class="file-icon">âš™ï¸</span>
                    <div class="file-info">
                        <span class="file-name">project_config.yaml</span>
                        <span class="file-desc">Project configuration</span>
                    </div>
                    <span class="file-size">0.8 KB</span>
                </div>
                <div class="file-item">
                    <span class="file-icon">ğŸš€</span>
                    <div class="file-info">
                        <span class="file-name">run_demo.sh</span>
                        <span class="file-desc">One-click launcher</span>
                    </div>
                    <span class="file-size">1.2 KB</span>
                </div>
            </div>
        </div>

        <div class="export-options">
            <div class="form-group">
                <label>Export Location</label>
                <input type="text" id="export-path" value="./output/">
            </div>
            <div class="form-group">
                <label>Package Format</label>
                <select id="export-format">
                    <option value="folder">Folder</option>
                    <option value="zip">ZIP Archive</option>
                    <option value="git">Git Repository</option>
                </select>
            </div>
        </div>

        <div class="export-actions">
            <button class="btn btn-secondary">ğŸ“‹ Copy to Clipboard</button>
            <button id="export-btn" class="btn btn-primary btn-large">ğŸ’¾ Export All Files</button>
        </div>

        <div id="export-result" class="export-result hidden">
            <p class="success">âœ“ Files exported successfully!</p>
        </div>
    </div>
</div>

<script>
    document.getElementById('export-btn').addEventListener('click', async function() {
        this.disabled = true;
        this.textContent = 'â³ Exporting...';

        try {
            const response = await fetch('/api/export', { method: 'POST' });
            const data = await response.json();

            const resultDiv = document.getElementById('export-result');
            resultDiv.classList.remove('hidden');

            if (data.success) {
                resultDiv.innerHTML = `<p class="success">âœ“ ${data.message}</p>`;
            } else {
                resultDiv.innerHTML = `<p class="error">âœ— Export failed</p>`;
            }
        } catch (error) {
            console.error(error);
        }

        this.disabled = false;
        this.textContent = 'ğŸ’¾ Export All Files';
    });
</script>
{% endblock %}
